<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width">

    <title>Json paste</title>
    <link href="/style.css" rel="stylesheet" type="text/css">
</head>

<body>

    <a href="/view/">view</a>

    <label>
        Title
        <input type="text" id="title" placeholder="file title">
    </label>

    <!-- <div id="jsoneditor" style="width: 400px; height: 400px;"></div> -->

    <textarea name="" id="content"></textarea>
    <button id="save_data">Save</button>

    <script>

        function dataUpdate() {
            // var json = editor.get();
            // console.log('json', json);

            var json = contentEl.value;

            if (titleEl.value == '') {
                alert('please insert a title');
                return;
            }

            var data = {
                jsonData: json,
                title: titleEl.value
            }

            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/data', true);
            xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
            xhr.send(JSON.stringify(data));
        }

        //-------------------------------------

        var saveBtnEl = document.getElementById('save_data');
        var titleEl = document.getElementById('title');
        var contentEl = document.getElementById('content');

        saveBtnEl.addEventListener("click", function () {
            console.log('save');

            dataUpdate();
        });
    </script>
</body>

</html>